<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 Dashboard Financiero IA SaaS Marketing</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-icon {
            font-size: 2rem;
            margin-right: 15px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .metric-label {
            font-weight: 500;
            color: #666;
        }

        .metric-value {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .metric-value.positive {
            color: #28a745;
        }

        .metric-value.negative {
            color: #dc3545;
        }

        .metric-value.neutral {
            color: #007bff;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-excellent {
            background: #d4edda;
            color: #155724;
        }

        .status-good {
            background: #d1ecf1;
            color: #0c5460;
        }

        .status-warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-danger {
            background: #f8d7da;
            color: #721c24;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .control-group label {
            font-weight: 600;
            color: white;
            font-size: 0.9rem;
        }

        .control-group select,
        .control-group input {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #17a2b8;
            color: #0c5460;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Dashboard Financiero IA SaaS Marketing</h1>
            <p>Monitoreo en Tiempo Real - Análisis Predictivo - Optimización Automática</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <label for="timeframe">Período de Análisis</label>
                <select id="timeframe" onchange="updateDashboard()">
                    <option value="3m">Últimos 3 Meses</option>
                    <option value="6m">Últimos 6 Meses</option>
                    <option value="1y" selected>Último Año</option>
                    <option value="3y">Últimos 3 Años</option>
                </select>
            </div>
            <div class="control-group">
                <label for="scenario">Escenario</label>
                <select id="scenario" onchange="updateDashboard()">
                    <option value="base" selected>Escenario Base</option>
                    <option value="optimistic">Optimista</option>
                    <option value="pessimistic">Pesimista</option>
                </select>
            </div>
            <div class="control-group">
                <label for="currency">Moneda</label>
                <select id="currency" onchange="updateDashboard()">
                    <option value="USD" selected>USD ($)</option>
                    <option value="EUR">EUR (€)</option>
                    <option value="MXN">MXN ($)</option>
                </select>
            </div>
        </div>

        <div class="alert alert-info">
            <strong>📊 Actualización Automática:</strong> Los datos se actualizan cada 15 minutos. Última actualización: <span id="lastUpdate"></span>
        </div>

        <div class="dashboard-grid">
            <!-- Métricas Financieras Clave -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">💰</div>
                    <div class="card-title">Métricas Financieras Clave</div>
                </div>
                <div class="metric">
                    <span class="metric-label">ARR (Annual Recurring Revenue)</span>
                    <span class="metric-value positive" id="arr">$2.4M</span>
                </div>
                <div class="metric">
                    <span class="metric-label">MRR (Monthly Recurring Revenue)</span>
                    <span class="metric-value positive" id="mrr">$200K</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Gross Margin</span>
                    <span class="metric-value positive" id="grossMargin">78.5%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">EBITDA Margin</span>
                    <span class="metric-value positive" id="ebitdaMargin">15.2%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Net Profit Margin</span>
                    <span class="metric-value positive" id="netMargin">8.7%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 78.5%"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span class="status-badge status-excellent">Excelente</span>
                </div>
            </div>

            <!-- Métricas de Crecimiento -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📈</div>
                    <div class="card-title">Métricas de Crecimiento</div>
                </div>
                <div class="metric">
                    <span class="metric-label">Crecimiento MRR</span>
                    <span class="metric-value positive" id="mrrGrowth">+12.5%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Crecimiento ARR</span>
                    <span class="metric-value positive" id="arrGrowth">+45.2%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Nuevos Clientes (Mes)</span>
                    <span class="metric-value positive" id="newCustomers">+247</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Churn Rate</span>
                    <span class="metric-value negative" id="churnRate">-2.1%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Net Revenue Retention</span>
                    <span class="metric-value positive" id="nrr">118.5%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span class="status-badge status-excellent">Crecimiento Sólido</span>
                </div>
            </div>

            <!-- Métricas de Adquisición -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🎯</div>
                    <div class="card-title">Métricas de Adquisición</div>
                </div>
                <div class="metric">
                    <span class="metric-label">CAC (Customer Acquisition Cost)</span>
                    <span class="metric-value neutral" id="cac">$127</span>
                </div>
                <div class="metric">
                    <span class="metric-label">LTV (Lifetime Value)</span>
                    <span class="metric-value positive" id="ltv">$2,847</span>
                </div>
                <div class="metric">
                    <span class="metric-label">LTV/CAC Ratio</span>
                    <span class="metric-value positive" id="ltvCac">22.4x</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Payback Period</span>
                    <span class="metric-value positive" id="payback">8.2 meses</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Conversion Rate</span>
                    <span class="metric-value positive" id="conversion">12.8%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 90%"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span class="status-badge status-excellent">Adquisición Eficiente</span>
                </div>
            </div>

            <!-- Métricas Operacionales -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">⚙️</div>
                    <div class="card-title">Métricas Operacionales</div>
                </div>
                <div class="metric">
                    <span class="metric-label">Burn Rate (Mensual)</span>
                    <span class="metric-value negative" id="burnRate">-$45K</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Runway (Meses)</span>
                    <span class="metric-value positive" id="runway">24.5</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Cash Flow</span>
                    <span class="metric-value positive" id="cashFlow">+$155K</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Team Size</span>
                    <span class="metric-value neutral" id="teamSize">18</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Productivity Index</span>
                    <span class="metric-value positive" id="productivity">8.7/10</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 75%"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span class="status-badge status-good">Operaciones Sólidas</span>
                </div>
            </div>

            <!-- Proyecciones Financieras -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">🔮</div>
                    <div class="card-title">Proyecciones Financieras</div>
                </div>
                <div class="chart-container">
                    <canvas id="revenueProjection"></canvas>
                </div>
                <div class="metric">
                    <span class="metric-label">ARR Proyectado (12 meses)</span>
                    <span class="metric-value positive" id="projectedArr">$4.2M</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Break-even (Meses)</span>
                    <span class="metric-value positive" id="breakEven">18</span>
                </div>
            </div>

            <!-- Análisis de Rentabilidad -->
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">📊</div>
                    <div class="card-title">Análisis de Rentabilidad</div>
                </div>
                <div class="chart-container">
                    <canvas id="profitabilityChart"></canvas>
                </div>
                <div class="metric">
                    <span class="metric-label">ROI Proyectado</span>
                    <span class="metric-value positive" id="projectedRoi">9.2x</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Valuación Pre-money</span>
                    <span class="metric-value positive" id="valuation">$45.6M</span>
                </div>
            </div>
        </div>

        <div class="alert alert-success">
            <strong>🎉 Estado General:</strong> El proyecto está en excelente estado financiero con métricas superiores al benchmark de la industria. Se recomienda continuar con la estrategia actual y acelerar la expansión internacional.
        </div>
    </div>

    <script>
        // Datos de ejemplo (en una implementación real, estos vendrían de APIs)
        const financialData = {
            base: {
                arr: 2400000,
                mrr: 200000,
                grossMargin: 78.5,
                ebitdaMargin: 15.2,
                netMargin: 8.7,
                mrrGrowth: 12.5,
                arrGrowth: 45.2,
                newCustomers: 247,
                churnRate: 2.1,
                nrr: 118.5,
                cac: 127,
                ltv: 2847,
                ltvCac: 22.4,
                payback: 8.2,
                conversion: 12.8,
                burnRate: -45000,
                runway: 24.5,
                cashFlow: 155000,
                teamSize: 18,
                productivity: 8.7,
                projectedArr: 4200000,
                breakEven: 18,
                projectedRoi: 9.2,
                valuation: 45600000
            },
            optimistic: {
                arr: 3200000,
                mrr: 267000,
                grossMargin: 82.1,
                ebitdaMargin: 22.3,
                netMargin: 15.8,
                mrrGrowth: 18.7,
                arrGrowth: 67.4,
                newCustomers: 389,
                churnRate: 1.4,
                nrr: 135.2,
                cac: 98,
                ltv: 3847,
                ltvCac: 39.3,
                payback: 5.8,
                conversion: 18.2,
                burnRate: -25000,
                runway: 36.2,
                cashFlow: 242000,
                teamSize: 22,
                productivity: 9.4,
                projectedArr: 6800000,
                breakEven: 12,
                projectedRoi: 14.7,
                valuation: 78200000
            },
            pessimistic: {
                arr: 1800000,
                mrr: 150000,
                grossMargin: 72.3,
                ebitdaMargin: 8.9,
                netMargin: 3.2,
                mrrGrowth: 6.8,
                arrGrowth: 23.1,
                newCustomers: 156,
                churnRate: 3.8,
                nrr: 98.7,
                cac: 189,
                ltv: 1987,
                ltvCac: 10.5,
                payback: 12.4,
                conversion: 8.1,
                burnRate: -75000,
                runway: 16.8,
                cashFlow: 75000,
                teamSize: 15,
                productivity: 7.2,
                projectedArr: 2800000,
                breakEven: 28,
                projectedRoi: 4.8,
                valuation: 28400000
            }
        };

        function updateDashboard() {
            const scenario = document.getElementById('scenario').value;
            const currency = document.getElementById('currency').value;
            const data = financialData[scenario];
            
            // Actualizar métricas
            document.getElementById('arr').textContent = formatCurrency(data.arr, currency);
            document.getElementById('mrr').textContent = formatCurrency(data.mrr, currency);
            document.getElementById('grossMargin').textContent = data.grossMargin + '%';
            document.getElementById('ebitdaMargin').textContent = data.ebitdaMargin + '%';
            document.getElementById('netMargin').textContent = data.netMargin + '%';
            document.getElementById('mrrGrowth').textContent = '+' + data.mrrGrowth + '%';
            document.getElementById('arrGrowth').textContent = '+' + data.arrGrowth + '%';
            document.getElementById('newCustomers').textContent = '+' + data.newCustomers;
            document.getElementById('churnRate').textContent = '-' + data.churnRate + '%';
            document.getElementById('nrr').textContent = data.nrr + '%';
            document.getElementById('cac').textContent = formatCurrency(data.cac, currency);
            document.getElementById('ltv').textContent = formatCurrency(data.ltv, currency);
            document.getElementById('ltvCac').textContent = data.ltvCac + 'x';
            document.getElementById('payback').textContent = data.payback + ' meses';
            document.getElementById('conversion').textContent = data.conversion + '%';
            document.getElementById('burnRate').textContent = formatCurrency(data.burnRate, currency);
            document.getElementById('runway').textContent = data.runway;
            document.getElementById('cashFlow').textContent = formatCurrency(data.cashFlow, currency);
            document.getElementById('teamSize').textContent = data.teamSize;
            document.getElementById('productivity').textContent = data.productivity + '/10';
            document.getElementById('projectedArr').textContent = formatCurrency(data.projectedArr, currency);
            document.getElementById('breakEven').textContent = data.breakEven;
            document.getElementById('projectedRoi').textContent = data.projectedRoi + 'x';
            document.getElementById('valuation').textContent = formatCurrency(data.valuation, currency);

            // Actualizar gráficos
            updateCharts(data);
        }

        function formatCurrency(amount, currency) {
            const symbols = {
                'USD': '$',
                'EUR': '€',
                'MXN': '$'
            };
            
            const symbol = symbols[currency] || '$';
            const absAmount = Math.abs(amount);
            
            if (absAmount >= 1000000) {
                return symbol + (absAmount / 1000000).toFixed(1) + 'M';
            } else if (absAmount >= 1000) {
                return symbol + (absAmount / 1000).toFixed(0) + 'K';
            } else {
                return symbol + absAmount.toFixed(0);
            }
        }

        function updateCharts(data) {
            // Gráfico de proyección de ingresos
            const revenueCtx = document.getElementById('revenueProjection').getContext('2d');
            new Chart(revenueCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                    datasets: [{
                        label: 'MRR Proyectado',
                        data: [data.mrr * 0.6, data.mrr * 0.7, data.mrr * 0.8, data.mrr * 0.9, data.mrr, data.mrr * 1.1, data.mrr * 1.2, data.mrr * 1.3, data.mrr * 1.4, data.mrr * 1.5, data.mrr * 1.6, data.mrr * 1.7],
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatCurrency(value, document.getElementById('currency').value);
                                }
                            }
                        }
                    }
                }
            });

            // Gráfico de rentabilidad
            const profitabilityCtx = document.getElementById('profitabilityChart').getContext('2d');
            new Chart(profitabilityCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Costos Variables', 'Costos Fijos', 'Utilidad'],
                    datasets: [{
                        data: [22, 60, 18],
                        backgroundColor: ['#dc3545', '#ffc107', '#28a745'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function updateLastUpdate() {
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString();
        }

        // Inicializar dashboard
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
            updateLastUpdate();
            
            // Actualizar cada 15 minutos
            setInterval(updateLastUpdate, 900000);
        });
    </script>
</body>
</html>


